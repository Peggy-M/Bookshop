<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bookshop.user.bean.LoginUserBeanMapper">
  <resultMap id="BaseResultMap" type="com.bookshop.user.bean.LoginUserBean">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Jun 04 16:31:35 CST 2017.
    -->
    <id column="user_id" jdbcType="INTEGER" property="userId" />
    <result column="user_name" jdbcType="VARCHAR" property="userName" />
    <result column="user_password" jdbcType="VARCHAR" property="userPassword" />
    <result column="user_image" property="userImage" />
    <result column="user_phone" jdbcType="VARCHAR" property="userPhone" />
    <result column="user_email" property="userEmail" />
    <result column="user_realname" jdbcType="VARCHAR" property="userRealname" />
    <result column="user_registertime" jdbcType="VARCHAR" property="userRegisterTime" />
    <result column="last_login_time" jdbcType="VARCHAR" property="lastLoginTime" />
    <result column="user_status" jdbcType="INTEGER" property="userStatus" />
  </resultMap>
  <select id="selectUserByNameAndPawd" parameterType="String" resultMap="BaseResultMap">
 		select user_id,user_name,user_password from tb_user where user_name = #{userName} 
 	</select>
 	
 	<select id="selectUserByName" parameterType="String" resultMap="BaseResultMap">
 		select * from tb_user where user_name = #{userName}
 	</select>
 	
 	<select id="selectUserById" parameterType="int" resultMap="BaseResultMap">
 		select * from tb_user where user_id = #{userId}
 	</select>
 	
 	<insert id="insertUser" parameterType="com.bookshop.user.bean.LoginUserBean">
 		insert into tb_user (
 		 user_name,user_password,user_registertime,user_status,user_phone
 		 ) values(
 		 #{userName},#{userPassword},#{userRegisterTime},#{userStatus},#{userPhone}
 		 )
 	</insert>
 	
	<update id="updateLoginTimeByName" parameterType="com.bookshop.user.bean.LoginUserBean">
 		update tb_user set last_login_time = #{lastLoginTime} where user_name=#{userName}
 	</update>
 	
 	<select id="getUserList" resultMap="BaseResultMap" parameterType="int">
 		select * from tb_user order by user_id limit #{pageno},8
 	</select>
 	
 	<update id="updatePasswordById" parameterType="com.bookshop.user.bean.LoginUserBean">
 		update tb_user set user_password=#{userPassword} where user_name = #{userName}
 	</update>
 	
 	<update id="updateStatusById" parameterType="com.bookshop.user.bean.LoginUserBean">
 		update tb_user set user_status=#{userStatus} where user_id = #{userId}
 	</update> 
 	
 	<update id="updateUserInfoById" parameterType="com.bookshop.user.bean.LoginUserBean">
 		update tb_user set 
		 	user_name=#{userName},user_image = #{userImage},user_phone=#{userPhone},user_email=#{userEmail},
 			user_realname=#{userRealname} ,user_status=#{userStatus},user_password=#{userPassword}
 			where user_id = #{userId}
 	</update>
 	
 	<select id="getPhoneByName" parameterType="String" resultType="String">
 		select user_phone from tb_user where user_name = #{userName}
 	</select>
 	
 	<select id="getStatusByName" parameterType="String" resultType="int">
 		select user_status from tb_user where user_name = #{userName}
 	</select>
 	
 	<delete id="deleteById" parameterType="int">
 		delete from tb_user where user_id = #{userId}
 	</delete>  
 	
 	<select id="getUserCount" resultType="int">
 		select count(user_id) from tb_user
 	</select>
 	
 	<insert id="insertUserInfo" parameterType="com.bookshop.user.bean.LoginUserBean">
 		insert into tb_user (
 		 user_name,user_password,user_image,user_email,user_registertime,user_realname,user_status,user_phone
 		 ) values(
 		 #{userName},#{userPassword},#{userImage},#{userEmail},#{userRegisterTime},#{userRealname},#{userStatus},#{userPhone}
 		 )
 	</insert>
</mapper>